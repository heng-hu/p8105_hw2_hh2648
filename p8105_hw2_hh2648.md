P8105 Data Science I - Homework 2
================
Heng Hu (hh2648)
2025-09-30

Load packages

``` r
library(tidyverse)
```

## Problem 1

``` r
# Input and clean pols-month.csv
pols = read_csv(file = "./data/pols-month.csv") |> 
  separate(mon, c("year", "month", "day"), remove = FALSE) |> 
  mutate(year = as.numeric(year),
         month = month(mon, label = TRUE, abbr = FALSE),
         president = ifelse(prez_gop == 1, "rep", "dem")) |> 
  select(-c(mon, day, prez_gop, prez_dem)) |> 
  select(year, month, president, everything()) |> 
  arrange(year, month)

pols
```

    ## # A tibble: 822 × 9
    ##     year month     president gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <dbl> <ord>     <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1  1947 January   dem            23      51     253      23      45     198
    ##  2  1947 February  dem            23      51     253      23      45     198
    ##  3  1947 March     dem            23      51     253      23      45     198
    ##  4  1947 April     dem            23      51     253      23      45     198
    ##  5  1947 May       dem            23      51     253      23      45     198
    ##  6  1947 June      dem            23      51     253      23      45     198
    ##  7  1947 July      dem            23      51     253      23      45     198
    ##  8  1947 August    dem            23      51     253      23      45     198
    ##  9  1947 September dem            23      51     253      23      45     198
    ## 10  1947 October   dem            23      51     253      23      45     198
    ## # ℹ 812 more rows

The dataset `pols` has `9` variables and `822` records related to the
number of national politicians who are democratic or republican. The
dataset covers the period from `January`, `1947` to `June`, `2015`.
Variables `year` and `month` represent the time period, while
`president` indicates the political party of the president during that
time.

``` r
# Input and clean snp.csv
snp = read_csv(file = "./data/snp.csv") |> 
  mutate(date = as.Date(date, format = "%m/%d/%y"),
         year = year(date),
         year = ifelse(year > 2025, year-100, year),
         month = month(date, label = TRUE, abbr = FALSE)) |> 
  select(year, month, close) |> 
  arrange(year, month)

snp
```

    ## # A tibble: 787 × 3
    ##     year month     close
    ##    <dbl> <ord>     <dbl>
    ##  1  1950 January    17.0
    ##  2  1950 February   17.2
    ##  3  1950 March      17.3
    ##  4  1950 April      18.0
    ##  5  1950 May        18.8
    ##  6  1950 June       17.7
    ##  7  1950 July       17.8
    ##  8  1950 August     18.4
    ##  9  1950 September  19.5
    ## 10  1950 October    19.5
    ## # ℹ 777 more rows

The dataset `snp` has `3` variables and `787` records related to
Standard & Poor’s stock market index (S&P). The dataset covers the
period from `January`, `1950` to `July`, `2015`. Variables `year` and
`month` represent the time period, while `close` indicates the closing
values of the S&P stock index on the associated date.

``` r
# Input and clean unemployment.csv
unemployment = read_csv(file = "./data/unemployment.csv") |> 
  pivot_longer(cols = (-Year),
               names_to = "month_abb",
               values_to = "ue_rate") |> 
  mutate(year = Year,
         month = match(month_abb, month.abb),
         yr_mon = as.Date(paste(year, month, "01", sep = "-")),
         month = month(yr_mon, label = TRUE, abbr = FALSE)) |> 
  select(year, month, ue_rate) |> 
  arrange(year, month)

unemployment
```

    ## # A tibble: 816 × 3
    ##     year month     ue_rate
    ##    <dbl> <ord>       <dbl>
    ##  1  1948 January       3.4
    ##  2  1948 February      3.8
    ##  3  1948 March         4  
    ##  4  1948 April         3.9
    ##  5  1948 May           3.5
    ##  6  1948 June          3.6
    ##  7  1948 July          3.6
    ##  8  1948 August        3.9
    ##  9  1948 September     3.8
    ## 10  1948 October       3.7
    ## # ℹ 806 more rows

The dataset `unemployment` has `3` variables and `816` observations
recording the unemployment rate. The dataset covers the period from
`January`, `1948` to `December`, `2015`. Variables `year` and `month`
represent the time period, while `ue_rate` indicates the unemployment
rate during that time.

``` r
# Join the 3 datasets 
full_dt = pols |> 
  left_join(snp, by = c("year", "month")) |> 
  left_join(unemployment, by = c("year", "month"))

full_dt
```

    ## # A tibble: 822 × 11
    ##     year month   president gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem close
    ##    <dbl> <ord>   <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <dbl>
    ##  1  1947 January dem            23      51     253      23      45     198    NA
    ##  2  1947 Februa… dem            23      51     253      23      45     198    NA
    ##  3  1947 March   dem            23      51     253      23      45     198    NA
    ##  4  1947 April   dem            23      51     253      23      45     198    NA
    ##  5  1947 May     dem            23      51     253      23      45     198    NA
    ##  6  1947 June    dem            23      51     253      23      45     198    NA
    ##  7  1947 July    dem            23      51     253      23      45     198    NA
    ##  8  1947 August  dem            23      51     253      23      45     198    NA
    ##  9  1947 Septem… dem            23      51     253      23      45     198    NA
    ## 10  1947 October dem            23      51     253      23      45     198    NA
    ## # ℹ 812 more rows
    ## # ℹ 1 more variable: ue_rate <dbl>

Since the merged data may be used to analyze the political influence on
national-level economic conditions, I applied `left_join` to retain all
the observations from the `pols` dataset when merging these 3 datasets.
The merged dataset is called `full_dt`. It contains `822` observations
of `11` variables, and covers the period from `January`, `1947` to
`June`, `2015`. Like the previous datasets, variables `year` and `month`
represent the time period. `president`, `close`, and `ue_rate` indicate,
respectively, the political party of the president, the closing values
of the S&P stock index, and unemployment rate during that time.
